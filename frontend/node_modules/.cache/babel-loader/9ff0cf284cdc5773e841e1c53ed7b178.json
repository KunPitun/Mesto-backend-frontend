{"ast":null,"code":"class Api {\n  constructor(_ref) {\n    let {\n      baseUrl,\n      headers\n    } = _ref;\n    this._baseUrl = baseUrl;\n    this._autorization = localStorage.getItem('jwt');\n    ;\n    this._contentType = headers['Content-Type'];\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n\n    return Promise.reject(`Ошибка ${res.status}`);\n  }\n\n  getUserData() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: {\n        authorization: this._autorization\n      }\n    }).then(this._checkResponse);\n  }\n\n  getInitialCards() {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: {\n        authorization: this._autorization,\n        'Content-Type': this._contentType\n      }\n    }).then(this._checkResponse);\n  }\n\n  giveUserInfo(name, info) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._autorization,\n        'Content-Type': this._contentType\n      },\n      body: JSON.stringify({\n        name: name,\n        about: info\n      })\n    }).then(this._checkResponse);\n  }\n\n  giveCardInfo(place, link) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this._autorization,\n        'Content-Type': this._contentType\n      },\n      body: JSON.stringify({\n        name: place,\n        link: link\n      })\n    }).then(this._checkResponse);\n  }\n\n  changeLikeStatus(cardId, isLiked) {\n    if (isLiked) {\n      return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\n        method: 'PUT',\n        headers: {\n          authorization: this._autorization,\n          'Content-Type': this._contentType\n        }\n      }).then(this._checkResponse);\n    } else {\n      return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\n        method: 'DELETE',\n        headers: {\n          authorization: this._autorization,\n          'Content-Type': this._contentType\n        }\n      }).then(this._checkResponse);\n    }\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._autorization,\n        'Content-Type': this._contentType\n      }\n    }).then(this._checkResponse);\n  }\n\n  giveAvatarInfo(link) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._autorization,\n        'Content-Type': this._contentType\n      },\n      body: JSON.stringify({\n        avatar: link\n      })\n    }).then(this._checkResponse);\n  }\n\n}\n\nconst api = new Api({\n  baseUrl: 'https://api.kunpitun.mesto.nomoredomains.icu',\n  headers: {\n    authorization: 'a36e0e0d-a48a-4afd-9e5d-855c3e7f30f4',\n    'Content-Type': 'application/json'\n  }\n});\nexport default api;","map":{"version":3,"names":["Api","constructor","baseUrl","headers","_baseUrl","_autorization","localStorage","getItem","_contentType","_checkResponse","res","ok","json","Promise","reject","status","getUserData","fetch","authorization","then","getInitialCards","giveUserInfo","name","info","method","body","JSON","stringify","about","giveCardInfo","place","link","changeLikeStatus","cardId","isLiked","deleteCard","giveAvatarInfo","avatar","api"],"sources":["C:/Users/nicky/dev/Project work 3/react-mesto-auth/src/utils/Api.js"],"sourcesContent":["class Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._autorization = localStorage.getItem('jwt');;\r\n    this._contentType = headers['Content-Type'];\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка ${res.status}`);\r\n  }\r\n\r\n  getUserData() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      headers: {\r\n        authorization: this._autorization\r\n      }\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      headers: {\r\n        authorization: this._autorization,\r\n        'Content-Type': this._contentType\r\n      }\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  giveUserInfo(name, info) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._autorization,\r\n        'Content-Type': this._contentType\r\n      },\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: info\r\n      })\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  giveCardInfo(place, link) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'POST',\r\n      headers: {\r\n        authorization: this._autorization,\r\n        'Content-Type': this._contentType\r\n      },\r\n      body: JSON.stringify({\r\n        name: place,\r\n        link: link\r\n      })\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  changeLikeStatus(cardId, isLiked) {\r\n    if(isLiked) {\r\n      return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          authorization: this._autorization,\r\n          'Content-Type': this._contentType\r\n        }\r\n      })\r\n        .then(this._checkResponse)\r\n    }\r\n    else {\r\n      return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          authorization: this._autorization,\r\n          'Content-Type': this._contentType\r\n        }\r\n      })\r\n        .then(this._checkResponse)\r\n    }\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._autorization,\r\n        'Content-Type': this._contentType\r\n      }\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  giveAvatarInfo(link) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._autorization,\r\n        'Content-Type': this._contentType\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: link\r\n      })\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: 'https://api.kunpitun.mesto.nomoredomains.icu',\r\n  headers: {\r\n    authorization: 'a36e0e0d-a48a-4afd-9e5d-855c3e7f30f4',\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\nexport default api;"],"mappings":"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"},"metadata":{},"sourceType":"module"}