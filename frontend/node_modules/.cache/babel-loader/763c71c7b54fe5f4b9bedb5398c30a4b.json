{"ast":null,"code":"class Api {\n  constructor(_ref) {\n    let {\n      baseUrl,\n      headers\n    } = _ref;\n    this._baseUrl = baseUrl;\n    this._autorization = headers.authorization;\n    this._contentType = headers['Content-Type'];\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n\n    return Promise.reject(`Ошибка ${res.status}`);\n  }\n\n  getUserData() {\n    console.log(this._autorization);\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: {\n        authorization: this._autorization,\n        'Content-Type': this._contentType\n      }\n    }).then(this._checkResponse);\n  }\n\n  getInitialCards() {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: {\n        authorization: this._autorization,\n        'Content-Type': this._contentType\n      }\n    }).then(this._checkResponse);\n  }\n\n  giveUserInfo(name, info) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._autorization,\n        'Content-Type': this._contentType\n      },\n      body: JSON.stringify({\n        name: name,\n        about: info\n      })\n    }).then(this._checkResponse);\n  }\n\n  giveCardInfo(place, link) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this._autorization,\n        'Content-Type': this._contentType\n      },\n      body: JSON.stringify({\n        name: place,\n        link: link\n      })\n    }).then(this._checkResponse);\n  }\n\n  changeLikeStatus(cardId, isLiked) {\n    if (isLiked) {\n      return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\n        method: 'PUT',\n        headers: {\n          authorization: this._autorization,\n          'Content-Type': this._contentType\n        }\n      }).then(this._checkResponse);\n    } else {\n      return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\n        method: 'DELETE',\n        headers: {\n          authorization: this._autorization,\n          'Content-Type': this._contentType\n        }\n      }).then(this._checkResponse);\n    }\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._autorization,\n        'Content-Type': this._contentType\n      }\n    }).then(this._checkResponse);\n  }\n\n  giveAvatarInfo(link) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._autorization,\n        'Content-Type': this._contentType\n      },\n      body: JSON.stringify({\n        avatar: link\n      })\n    }).then(this._checkResponse);\n  }\n\n}\n\nconst api = new Api({\n  baseUrl: 'https://api.kunpitun.mesto.nomoredomains.icu',\n  headers: {\n    'Content-Type': 'application/json',\n    authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MzNjNzc0MzlkZmExYjY0NDhmZDVjZjQiLCJpYXQiOjE2NjUzMzMyMDgsImV4cCI6MTY2NTkzODAwOH0.OQtk8qRU5WFTtfa0KgoDXqlCFon8ELrZiMS53wTNLl8'\n  }\n});\nexport default api;","map":{"version":3,"names":["Api","constructor","baseUrl","headers","_baseUrl","_autorization","authorization","_contentType","_checkResponse","res","ok","json","Promise","reject","status","getUserData","console","log","fetch","then","getInitialCards","giveUserInfo","name","info","method","body","JSON","stringify","about","giveCardInfo","place","link","changeLikeStatus","cardId","isLiked","deleteCard","giveAvatarInfo","avatar","api"],"sources":["C:/Users/nicky/dev/Project work 3/react-mesto-auth/src/utils/Api.js"],"sourcesContent":["class Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._autorization = headers.authorization;\r\n    this._contentType = headers['Content-Type'];\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка ${res.status}`);\r\n  }\r\n\r\n  getUserData() {\r\n    console.log(this._autorization);\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      headers: {\r\n        authorization: this._autorization,\r\n        'Content-Type': this._contentType,\r\n      }\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      headers: {\r\n        authorization: this._autorization,\r\n        'Content-Type': this._contentType\r\n      }\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  giveUserInfo(name, info) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._autorization,\r\n        'Content-Type': this._contentType\r\n      },\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: info\r\n      })\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  giveCardInfo(place, link) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'POST',\r\n      headers: {\r\n        authorization: this._autorization,\r\n        'Content-Type': this._contentType\r\n      },\r\n      body: JSON.stringify({\r\n        name: place,\r\n        link: link\r\n      })\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  changeLikeStatus(cardId, isLiked) {\r\n    if(isLiked) {\r\n      return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          authorization: this._autorization,\r\n          'Content-Type': this._contentType\r\n        }\r\n      })\r\n        .then(this._checkResponse)\r\n    }\r\n    else {\r\n      return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          authorization: this._autorization,\r\n          'Content-Type': this._contentType\r\n        }\r\n      })\r\n        .then(this._checkResponse)\r\n    }\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._autorization,\r\n        'Content-Type': this._contentType\r\n      }\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  giveAvatarInfo(link) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._autorization,\r\n        'Content-Type': this._contentType\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: link\r\n      })\r\n    })\r\n      .then(this._checkResponse)\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: 'https://api.kunpitun.mesto.nomoredomains.icu',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    authorization:\r\n'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MzNjNzc0MzlkZmExYjY0NDhmZDVjZjQiLCJpYXQiOjE2NjUzMzMyMDgsImV4cCI6MTY2NTkzODAwOH0.OQtk8qRU5WFTtfa0KgoDXqlCFon8ELrZiMS53wTNLl8',\r\n  }\r\n});\r\n\r\nexport default api;"],"mappings":"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"},"metadata":{},"sourceType":"module"}